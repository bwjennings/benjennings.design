*,
*::before,
*::after {
  box-sizing: border-box;
  outline-color: var(--color-border-base);
  margin: 0;
  scrollbar-width: thin;
  scrollbar-color: var(--color-border-primary) var(--color-surface-page);

scrollbar-gutter: stable;
}

:is(a) {
  text-decoration: none;
  color: unset;
}

img,
picture,
video,
canvas,
svg {
  display: block;
  max-width: 100%;
}

input,
button,
textarea,
select {
  font: inherit;
}


:focus-visible {
  outline: 4px solid var(--color-border-primary-hover);
}





::selection {
  background: var(--color-surface-b-secondary);
  color: var(--color-text-base-b);
  text-decoration: underline;
  text-decoration-color: var(--color-border-base-emphasis);
}

body {
  -webkit-font-smoothing: antialiased;
  background-color: var(--color-surface-page);
}




@supports selector(::-webkit-scrollbar) {
  ::-webkit-scrollbar {
    background: var(--color-surface-page);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--color-border-primary);
    width: 4px;
  }
}

.content {
  width: 100%;
  margin: auto;
  height: 100%;
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xxxl);
  padding-inline: var(--spacing-xxxl);
  padding-block: var(--spacing-xl);
}

.page-container {

  box-sizing: border-box;

  display: grid;
  grid-template-columns: clamp(200px, 20dvw, 400px) 1fr;
  grid-template-rows: auto minmax(0, 1fr);
  grid-template-areas:

    "sidebar content"
  ;
  /* Fill viewport but allow growth */
  min-height: 100dvh;
  overflow: visible;
  perspective: 1500px;
  /* Allow the page to grow with content; body uses this class */
  /* Previously set to 100dvh which capped body height to viewport */
  max-height: none;
  /* lock container to viewport height */
  container-type: inline-size;
    





}

main {
  grid-area: content;

  /* Content controls height */




}

.page-items {
  padding: 4dvw;

  &.layout-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(400px, 100%), 1fr));
    grid-auto-rows: min-content;
    gap: var(--spacing-xl);
  }

  &.layout-flex {
    display: flex;
    flex-direction: column;
    gap: 100px;

    width: 100%;
  }

  &.fundamentals-layout {
    padding-block: 20dvh;
    gap: 25dvh;
  }

  &.layout-post {
    margin-inline: auto;
    display: flex;
    flex-direction: column;
    gap: 5dvh;
    max-width: 120ch;
    align-items: stretch;

    :is(p, h2) {
      max-width: 60ch;
    }

    .button {
      align-self: start;
    }

    .section {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-lg);
    }
  }

  &.layout-welcome {
    display: grid;
    align-self: center;
    align-items: start;
    text-align: start;
    gap: clamp(var(--spacing-xl), 4cqh, var(--spacing-xxxl));
    padding-top: 14dvh;
    transform-style: preserve-3d;
    background-color: var(--color-surface-page);
    scroll-snap-align: top;
    z-index: 2;
    color: var(--color-text-primary);
    width: 100%;
    max-width: 700px;
    top: 0px;
    height: fit-content;

    .body {
      max-width: 50ch;
    }

    .actions {
      display: flex;
      flex-wrap: wrap;
      gap: var(--spacing-md);
      margin-top: var(--spacing-xl);
    }

    .heading {
      text-wrap: balance;
    }
  }
}

.page-title {
  transform-style: preserve-3d;
  background-color: var(--color-surface-page);
  scroll-snap-align: top;
  z-index: 2;
  margin-top: calc(10cqh - 40px);
  color: var(--color-text-primary);
  display: flex;
  gap: var(--spacing-md);
  flex-direction: column;
  justify-content: start;
  align-items: start;
  width: 100%;
  grid-column: 1 / -1;
  grid-template-rows: subgrid;
  grid-area: header;
 
  padding: 4dvw;
  scroll-padding: var(--spacing-xl);
  border-bottom: 1px solid var(--color-border-primary);
  user-select: none;


  .content {
    width: 100%;
    max-width: 100ch;
    text-wrap: balance;
  }
}



.post-header {
  background-color: var(--color-surface-b);
  color: var(--color-text-base-d);
  padding: var(--spacing-xxl);
  border-bottom: 1px solid var(--color-border-primary);
  display: flex;
  flex-direction: column;
  gap: var(--spacing-md);
  /* Auto height */
  height: auto;
  /* Corner radius */
  border-radius: var(--radius-md);
  /* Isolate paint */
  contain: paint;
  will-change: transform, opacity;

  &.color1 {
    background-color: var(--color-surface-a);
    color: var(--color-text-base);
    border-color: var(--color-border-base);
  }

  &.color2 {
    background-color: var(--color-surface-b);
    color: var(--color-text-base-b);
    border-color: var(--color-border-base-b);
  }

  &.color3 {
    background-color: var(--color-surface-c);
    color: var(--color-text-base-c);
    border-color: var(--color-border-base-c);
  }

  &.color4 {
    background-color: var(--color-surface-d);
    color: var(--color-text-base-d);
    border-color: var(--color-border-base-d);
  }

  .thumbnail {
    width: 100%;
    /* Header media */
    object-fit: cover;
    object-position: center;
    height: 120px;
    background: var(--color-surface-1);
    border-radius: var(--radius-none);
    overflow: hidden;

    display: flex;
    align-items: center;
    justify-content: center;
  }

  .icons-pattern {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-lg);
    align-items: center;
    justify-content: center;
    width: 326px;
    transform: rotate(-17deg);
  }

  .icon-group {
    display: flex;
    gap: var(--spacing-lg);
    align-items: center;
    justify-content: center;
    padding: var(--spacing-lg);
    border-radius: 23px;
    box-shadow:
      -8px -4px 10px 0px inset rgba(0, 0, 0, 0.08),
      1px 1px 0px 0px inset rgba(245, 250, 255, 0.8),
      2px 10px 31px 0px inset rgba(255, 255, 255, 0.4);
  }

  .icon-group.teal {
    background: var(--color-surface-a);
  }

  .icon-group.purple {
    background: var(--color-surface-d);
  }

  .icon-group.blue {
    background: var(--color-surface-c);
  }

  .icon-group .icon {
    font-family: var(--icon-font-family);
    font-size: var(--icon-size-xl);
    color: var(--color-icon-onFill);
    font-weight: var(--icon-weight-lg);
    line-height: 1;
  }
}


.fundamental-section {
  /* Scroll-driven translate on Y axis */
  animation-timeline: view(block);

  animation-range: entry 0% entry 150%;
  animation-name: grow;
  animation-fill-mode: both;
  animation-duration: 1ms;
  /* Firefox requires this to apply the animation */
  animation-timing-function: var(--transition-timing-motion);

  display: grid;
  grid-template-columns: repeat(3, 1fr);

  gap: var(--spacing-xxl);
  width: 100%;
  grid-template-areas:
    "fundamental-icon .                 ."
    "fundamental-icon fundamental-title fundamental-title"
    "fundamental-icon fundamental-body  fundamental-body"
    ".                fundamental-body  fundamental-body";

  &:nth-of-type(2) {
    grid-template-areas:
      ".                  .                 fundamental-icon"
      "fundamental-title  fundamental-title fundamental-icon"
      "fundamental-body   fundamental-body  fundamental-icon"
      "fundamental-body   fundamental-body  .";
  }

  .heading {
    grid-area: fundamental-title;
  }

  .body {
    grid-area: fundamental-body;
  }

  .icon-component {
    grid-area: fundamental-icon;
    width: 100%;
    justify-self: stretch;
  }
}

/* Defer offscreen rendering during transitions */
.post .section,
.post figure {
  content-visibility: auto;
  contain-intrinsic-size: 800px auto;
}


figure {

  img {
    max-height: 50dvh;
    object-fit: contain;
  }

  figcaption {
    text-align: center;
    font-size: var(--text-body-md-size);
    color: var(--color-text-secondary);
    margin-block: var(--spacing-sm);


  }
}




.gradient {
  height: 100%;
  min-height: 100px;
  width: 100%;
  background: linear-gradient(to right in oklch decreasing hue, var(--color-surface-a), var(--color-surface-b));

  &.rgb {
    background: linear-gradient(to right, var(--color-surface-a), var(--color-surface-b));
  }

  &.hsl {
    background: linear-gradient(to right in hsl decreasing hue, var(--color-surface-a), var(--color-surface-b));
  }
}








@media screen and (max-width: 800px),
(max-height: 500px) {
  body {


    transform: none;
  }

  main {
    padding: 12px;
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    /* Ensure content isn't obscured by the fixed bottom navigation on mobile */
    padding-bottom: calc(64px + env(safe-area-inset-bottom) + var(--spacing-md));



  }

  .main-content {
    padding: 16px;
    gap: 16px;
  }


  .page-container {
    min-height: 100lvh;
    display: block;
    max-height: none;
    /* No perspective on mobile */
    perspective: none;
  }






  .content {

    padding-inline: var(--spacing-lg);
    padding-block: var(--spacing-lg);
  }



  .page-title {
    max-width: none;
    position: initial;
    margin-top: calc(20cqh - 40px);
    padding: 4dvw;
  }

  /* Match mobile padding with page-title and ensure gutters */
  .page-items {
    /* Base gutter on small screens + account for safe-area */
    padding: 4dvw;
    padding-left: calc(4dvw + env(safe-area-inset-left));
    padding-right: calc(4dvw + env(safe-area-inset-right));
  }

  .page-items.layout-welcome {
    padding-top: 10dvh;
    gap: var(--spacing-xl);
  }
}


.welcome-card {
  margin-top: calc(20cqh - 40px);
}