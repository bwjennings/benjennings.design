@view-transition {
  navigation: auto;
}

:root {
  view-transition-name: none;
}
/* Keep navigation elements unnamed at the container level; only the
   moving highlight (.nav-background) participates in transitions. */


/* match-element only works for same-document transitions, not cross-document */
/* Keeping for potential future same-document usage */




::view-transition {
  --transition-duration: 500ms;
  --transition-timing: linear(0.00, -0.00240, 0.0955, 0.217, 0.331, 0.428, 0.518, 0.591, 0.656, 0.708, 0.754, 0.793, 0.825, 0.852, 0.874, 0.894, 0.911, 0.925, 0.936, 0.946, 0.955, 0.962, 0.968, 0.973, 0.977, 0.980, 0.983, 0.986, 0.988, 0.990, 0.992, 0.993, 0.994, 0.995, 0.996, 0.996, 0.997, 0.997, 0.998, 0.998, 0.998, 0.999, 0.999, 0.999, 1.00);
--transition-timing:cubic-bezier(0.4, 1.3, 0.35, 1);
}
::view-transition-group(*){
  animation-timing-function: var(--transition-timing);
}

/* Customize timing for the navigation highlight shared element */
::view-transition-group(nav-background) {
  animation-duration:500ms;
  animation-timing-function: cubic-bezier(0.4, 1.20, 0.22, 1.00);
}

/* Optional: allow separate duration/timing if desired */
::view-transition-old(nav-background),
::view-transition-new(nav-background) {
  
}

main {
  view-transition-name: page;
  contain: layout style paint;
  /* Improve compositing during cross-document transitions */
  will-change: opacity, transform;
}


::view-transition-old(page) {
  animation: blur-out var(--transition-duration) var(--transition-timing);
}

::view-transition-new(page) {
  animation: blur-in var(--transition-duration) var(--transition-timing);
}










::view-transition-group(*) {
  animation-duration: var(--transition-duration);
  animation-timing-function: var(--transition-timing);
  isolation: isolate;
  overflow: clip;
  
}








@keyframes blur-out {
  from {
    opacity: 1;
    filter: blur(0px);
    transform: scale(1);
  }
  30% {
    opacity: 0;
    filter: blur(4px);
    transform: scale(0.99);
  }
  to {
    opacity: 0;
    filter: blur(4px);
    transform: scale(0.99);
  }
}

@keyframes blur-in {
  from {
    opacity: 0;
    filter: blur(4px);
    transform: scale(0.98);
  }
  40% {
    opacity: 0;
    filter: blur(4px);
    transform: scale(0.98);
  }
  to {
    opacity: 1;
    filter: blur(0px);
    transform: scale(1);
  }
}


@media (prefers-reduced-motion: reduce) {
  /* Disable cross-document transitions entirely for reduced motion */
  @view-transition { navigation: none; }
  ::view-transition-old(),
  ::view-transition-new() {
    animation: none !important;
  }
}

/* During history/BFCache restore, avoid page group animations briefly */
html.restoring ::view-transition-old(page),
html.restoring ::view-transition-new(page) {
  animation: none !important;
}



/* Shared-element: card title → post header title only */
/* Designs (titles) */
::view-transition-old(design-dwellane-title),
::view-transition-old(design-pls-title),
::view-transition-old(design-herff-jones-title),
::view-transition-old(design-arvest-title) {
  animation: card-header-out var(--transition-duration) var(--transition-timing);
}
::view-transition-new(design-dwellane-title),
::view-transition-new(design-pls-title),
::view-transition-new(design-herff-jones-title),
::view-transition-new(design-arvest-title) {
  animation: card-header-in var(--transition-duration) var(--transition-timing);
}

/* Fundamentals (titles) */
::view-transition-old(fundamental-simplicity-title) {
  animation: card-header-out var(--transition-duration) var(--transition-timing);
}
::view-transition-new(fundamental-simplicity-title) {
  animation: card-header-in var(--transition-duration) var(--transition-timing);
}

/* Experiments (titles) */
::view-transition-old(experiment-spline-title),
::view-transition-old(experiment-spline-2-title),
::view-transition-old(experiment-digital-frame-title) {
  animation: card-header-out var(--transition-duration) var(--transition-timing);
}
::view-transition-new(experiment-spline-title),
::view-transition-new(experiment-spline-2-title),
::view-transition-new(experiment-digital-frame-title) {
  animation: card-header-in var(--transition-duration) var(--transition-timing);
}
/* Card → Post Header morph
   - Outgoing (card) slightly scales and fades
   - Incoming (header) grows from the card and settles with a soft pop */
@keyframes card-header-out {
  from {
    opacity: 1;
    filter:  blur(0px);
  }
  40% {
    opacity: 0.1;
    filter:   blur(8px);
  }
  to {
    opacity: 0;
    filter:  blur(2px);
  }
}

@keyframes card-header-in {
  from {
    opacity: 0;
    filter: blur(8px);
  }
  60% {
    opacity: 1;
      ;
  }
  to {
    opacity: 1;
    filter: blur(0px);
  }
}
