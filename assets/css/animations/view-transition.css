@view-transition {
  navigation: auto;
}

/* Component View Transition Names */
site-navigation {
  view-transition-name: nav;
}

site-settings {
  view-transition-name: settings;
}

/* View transition containment for performance - names set dynamically via JavaScript */
.card[data-project],
.post-header[data-project] {
  contain: layout style paint;
}

.card[data-project] img[slot="media"],
.card[data-project] .icon-placeholder,
.post-header[data-project] img[slot="media"],
.post-header[data-project] img,
.post-header[data-project] .icon-placeholder {
  contain: layout style paint;
}

.card[data-project] .title,
.post-header[data-project] .heading {
  contain: layout style paint;
}

/* Keep navigation and settings static */
::view-transition-old(nav),
::view-transition-new(nav) {
  animation: none;
}

::view-transition-old(settings),
::view-transition-new(settings) {
  animation: none;
}

/* Card-to-Detail transition animations with blur morphing */
html:active-view-transition-type(card-to-detail) ::view-transition-old(card-container),
html:active-view-transition-type(card-to-detail) ::view-transition-old(card-image),
html:active-view-transition-type(card-to-detail) ::view-transition-old(card-title) {
  animation: blur-morph-out 600ms cubic-bezier(0.2, 0, 0.2, 1);
  transform-origin: center center;
}

html:active-view-transition-type(card-to-detail) ::view-transition-new(card-container),
html:active-view-transition-type(card-to-detail) ::view-transition-new(card-image),
html:active-view-transition-type(card-to-detail) ::view-transition-new(card-title) {
  animation: blur-morph-in 600ms cubic-bezier(0.2, 0, 0.2, 1);
  transform-origin: center center;
}

html:active-view-transition-type(card-to-detail) ::view-transition-new(card-image) {
  object-fit: cover;
}

html:active-view-transition-type(card-to-detail) ::view-transition-new(card-title) {
  text-rendering: optimizeLegibility;
}

/* Detail-to-Card transition animations (faster, snappier) */
html:active-view-transition-type(detail-to-card) ::view-transition-old(card-container),
html:active-view-transition-type(detail-to-card) ::view-transition-old(card-image),
html:active-view-transition-type(detail-to-card) ::view-transition-old(card-title) {
  animation: blur-morph-out 400ms cubic-bezier(0.4, 0, 0.2, 1);
  transform-origin: center center;
}

html:active-view-transition-type(detail-to-card) ::view-transition-new(card-container),
html:active-view-transition-type(detail-to-card) ::view-transition-new(card-image),
html:active-view-transition-type(detail-to-card) ::view-transition-new(card-title) {
  animation: blur-morph-in 400ms cubic-bezier(0.4, 0, 0.2, 1);
  transform-origin: center center;
}

html:active-view-transition-type(detail-to-card) ::view-transition-new(card-image) {
  object-fit: cover;
}

/* Blur morphing keyframes */
@keyframes blur-morph-out {
  0% {
    opacity: 1;
    filter: blur(0px);
  }
  50% {
    opacity: 0.5;
    filter: blur(24px);
  }
  100% {
    opacity: 0;
    filter: blur(24px);
  }
}

@keyframes blur-morph-in {
  0% {
    opacity: 0;
    filter: blur(24px);
  }
  50% {
    opacity: 0.5;
    filter: blur(24px);
  }
  100% {
    opacity: 1;
    filter: blur(0px);
  }
}

/* Hardware acceleration for smooth transitions */
::view-transition-group(card-container),
::view-transition-group(card-image),
::view-transition-group(card-title) {
  isolation: isolate;
  contain: layout style paint;
  will-change: transform, opacity;
  backface-visibility: hidden;
  perspective: 1000px;
}

/* Respect user preferences */
@media (prefers-reduced-motion: reduce) {
  ::view-transition-old(*),
  ::view-transition-new(*) {
    animation-duration: 0.01ms !important;
  }
}